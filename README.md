# TopModsAPI

TopModsAPI - это API, разработанное с использованием фреймворка FastAPI. Оно предоставляет доступ к данным, получаемым путем парсинга сайта [top-mods](https://top-mods.com), и возвращает их в формате JSON.

## Возможности

- Получения списка игр
- Получение списка модификаций
- Поиск модификаций по различным критериям (игра, категория)
- Установка модификаций напрямую (без рекламы и дополнительных перенаправлений)
- Получение подробной информации об отдельной модификации
- Кэширование данных

## Установка и запуск

1. Клонируйте репозиторий:
```shell
git clone https://github.com/username/TopModsAPI.git
```
2. Перейдите в директорию проекта:
```shell
cd TopModsAPI
```

### Запуск через Docker Compose
3. Запустите приложение с помощью Docker Compose:
```shell
docker compose up -d
```

### Запуск из исходников
3. Создайте и активируйте виртуальное окружение:
```shell
python3 -m venv venv
source venv/bin/activate
```
4. Установите зависимости:
```shell
pip install -r requirements.txt
```
5. Запустите redis через docker:
```shell
docker run -d --rm -p 127.0.0.1:32768:6379 redis
```
6. Запустите сервер:
```shell
fastapi run src/main.py
```

Сервер будет доступен по адресу http://localhost:8000.

## Документация API

Документация API доступна по адресу http://localhost:8000/docs

## TLS Fingerprint
Долгое время я не понимал, почему функция для скачивания файлов для мода работала на моем целевом компьютере, но не работала в докере или на серверах Linux. Спустя какое то время я узнал про [TLS Fingerprint](https://engineering.salesforce.com/tls-fingerprinting-with-ja3-and-ja3s-247362855967/). Сайт по отпечатку (может JA3, может Akamai или что то другое) узнавал, что скрипт запускается с определенных устройтсв и блокировал запросы. С подменой отпечатков мне помогла библиотека [curl_ciffi](https://github.com/lexiforest/curl_cffi).
